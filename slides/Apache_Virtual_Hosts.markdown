<%= code 'repo/modules/apache/manifests/vhost.pp', :lang => "puppet" %>

Note the qualified definition name.  This is required for correct autoloading.
